---
- name: Playbook to install Nginx on Webservers
  hosts: server01
  become: yes
  gather_facts: yes
  tasks:
    - name: Perform Apt update and Install basic packages
      shell: apt update && apt install -y unzip jq net-tools
      when: (ansible_facts['distribution'] == "Ubuntu" and ansible_facts['distribution_version'] == '20.04')

    - name: Install Nginx Packages
      apt:
        name: nginx
        state: latest

    - name: Start nginx Service
      shell: systemctl start nginx

- name: Copy html files
  copy:
    src: /home/ubuntu/ansible-kelly/playbooks/index.html
    dest: /etc/foo.conf/var/www/html/index.nginx-debian.html
    owner: root
    group: root
    mode: "0644"

- name: Copy Style.css files
  copy:
    src: /home/ubuntu/ansible-kelly/playbooks/style.css
    dest: /etc/foo.conf/var/www/html/style.css
    owner: root
    group: root
    mode: "0644"
